!function(){"use strict";var e=100,t={tacos:{character:"assets/generated/zone-tacos.webp",characterVideo:"assets/generated/zone-tacos.mp4",accent:"#D4231A",quote:"Los tacos son mi vida, guero!"},quesadillas:{character:"assets/generated/zone-quesadillas.webp",characterVideo:"assets/generated/zone-quesadillas.mp4",accent:"#F9A825",quote:"Con quesito, todo sabe mejor."},charolas:{character:"assets/generated/zone-charolas.webp",characterVideo:"assets/generated/zone-charolas.mp4",accent:"#BF360C",quote:"Pa' los que van en serio."},especialidades:{character:"assets/generated/zone-especialidades.webp",characterVideo:"assets/generated/zone-especialidades.mp4",accent:"#8D6E63",quote:"Lo mejor de la casa, compadre."},bebidas:{character:"assets/generated/zone-bebidas.webp",characterVideo:"assets/generated/zone-bebidas.mp4",accent:"#558B2F",quote:"Pa' refrescar el alma!"},postres:{character:"assets/generated/zone-postres.webp",characterVideo:"assets/generated/zone-postres.mp4",accent:"#E91E63",quote:"El broche de oro, mi amor."},salsas:{character:"assets/generated/salsas-scene.webp",characterVideo:"assets/generated/salsas-scene.mp4",accent:"#F44336",quote:"El toque que le faltaba a tu taco!"}},n={tacos:{emoji:"üåÆ",short:"Tacos"},quesadillas:{emoji:"üßÄ",short:"Quesadillas"},charolas:{emoji:"ü•©",short:"Charolas"},especialidades:{emoji:"‚≠ê",short:"Especialidades"},bebidas:{emoji:"ü•§",short:"Bebidas"},postres:{emoji:"üç∞",short:"Postres"},salsas:{emoji:"üå∂Ô∏è",short:"Salsas"}},a=["taco-newyork","quesa-newyork","charola-combinada","charola-diezmillo","chavindeca","papa-grill"],o=null,r={},i=null,s="location",d=null,c=0,l=0,m=0,u=0,p=0,y=!1,f=!1,v={},g=document.getElementById("menu-nav"),h=document.getElementById("menu-dots"),b=document.getElementById("swipe-hint"),_=document.getElementById("menu-worlds"),I=document.getElementById("menu-worlds-track"),q=document.getElementById("cart-fab"),E=document.getElementById("cart-badge"),L=document.getElementById("bottom-sheet"),w=document.getElementById("sheet-overlay"),k=document.getElementById("sheet-items"),C=document.getElementById("sheet-empty"),B=document.getElementById("sheet-order-type"),x=document.getElementById("sheet-address"),S=document.getElementById("sheet-total-value"),T=document.getElementById("btn-send"),N=document.getElementById("address-form");function j(t){var n=t.target.closest(".stepper__btn");if(n){var a=n.dataset.id,i=n.dataset.action;if("plus"===i){var s=F(a);if(s&&s.item.hasIngredients)return void function(t){0;var n=F(t);if(!n)return;A();var a=n.item.ingredients||o.categories.find(function(e){return"tacos"===e.id}).items.map(function(e){return{id:e.id.replace("taco-",""),name:e.name}}),i=n.item.minIngredients&&n.item.maxIngredients,s=document.createElement("div");s.className="ingredient-picker-overlay",s.id="ingredient-picker-overlay";var d=document.createElement("div");d.className="ingredient-picker";var l=n.item.minIngredients||0,m=n.item.maxIngredients||0,u=document.createElement("div");u.className="ingredient-picker__title",u.textContent=i?"Elige "+(l===m?l:l+" a "+m)+" ingredientes ‚Äî "+n.item.name:"Elige tu ingrediente ‚Äî "+n.item.name;var p=document.createElement("div");p.className="ingredient-picker__grid";var y=n.item.nyPrice||100;if(i){var f=[],v=document.createElement("div");v.className="ingredient-picker__counter",v.textContent="0 de "+m+" seleccionados";var g=document.createElement("button");function b(){v.textContent=f.length+" de "+m+" seleccionados",g.disabled=f.length<l;for(var e=p.querySelectorAll(".ingredient-picker__btn"),t=0;t<e.length;t++){var n=e[t].dataset.ingId,a=-1!==f.indexOf(n);e[t].classList.toggle("is-selected",a),e[t].disabled=!a&&f.length>=m}}g.className="ingredient-picker__confirm",g.textContent="Confirmar",g.disabled=!0,a.forEach(function(e){if("combinado"!==e.id){var t=document.createElement("button");t.className="ingredient-picker__btn",t.dataset.ingId=e.id,t.textContent=e.name,t.addEventListener("click",function(){var t=f.indexOf(e.id);-1!==t?f.splice(t,1):f.length<m&&f.push(e.id),b()}),p.appendChild(t)}}),g.addEventListener("click",function(){if(!(f.length<l)){for(var e=[],n=0;n<f.length;n++)for(var o=0;o<a.length;o++)if(a[o].id===f[n]){e.push(a[o]);break}!function(e,t){var n=F(e);if(!n)return;var a=t.slice().sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}),o=e+"--"+a.map(function(e){return e.id}).join("+"),i=a.map(function(e){return e.name}).join(", ");r[o]||(r[o]={item:{id:o,name:n.item.name,price:n.item.price},qty:0,categoryName:n.categoryName,categoryId:n.categoryId,ingredientName:i,baseItemId:e});r[o].qty++,O(e),G();var s=I.querySelector('[data-item-id="'+e+'"]');s&&(s.classList.add("has-items"),s.classList.remove("is-pulse"),s.offsetWidth,s.classList.add("is-pulse"));$(c)}(t,e),A()}}),d.appendChild(u),d.appendChild(v),d.appendChild(p),d.appendChild(g)}else a.forEach(function(n){var a=document.createElement("button");a.className="ingredient-picker__btn","newyork"===n.id?(a.className+=" ingredient-picker__btn--ny",a.textContent=n.name+" ¬∑ $"+y):a.textContent=n.name,a.addEventListener("click",function(){!function(t,n,a){var o=t+"--"+n,i=F(t);if(!i)return;var s="newyork"===n?i.item.nyPrice||e:i.item.price;r[o]||(r[o]={item:{id:o,name:i.item.name,price:s},qty:0,categoryName:i.categoryName,categoryId:i.categoryId,ingredientName:a,baseItemId:t});r[o].qty++,O(t),G();var d=I.querySelector('[data-item-id="'+t+'"]');d&&(d.classList.add("has-items"),d.classList.remove("is-pulse"),d.offsetWidth,d.classList.add("is-pulse"));$(c)}(t,n.id,n.name),A()}),p.appendChild(a)}),d.appendChild(u),d.appendChild(p);var h=document.createElement("button");h.className="ingredient-picker__cancel",h.textContent="Cancelar",h.addEventListener("click",A),d.appendChild(h),s.appendChild(d),document.body.appendChild(s),s.addEventListener("click",function(e){e.target===s&&A()}),requestAnimationFrame(function(){s.classList.add("is-visible")})}(a);D(a)}if("minus"===i){var d=F(a);if(d&&d.item.hasIngredients)return void function(e){for(var t=Object.keys(r),n=e+"--",a=null,o=0;o<t.length;o++)0===t[o].indexOf(n)&&r[t[o]].qty>0&&(a=t[o]);if(!a)return;r[a].qty--,0===r[a].qty&&delete r[a];var i=M(e),s=I.querySelector('[data-item-id="'+e+'"]');s&&0===i&&s.classList.remove("has-items");O(e),G(),$(c)}(a);X(a)}}}function A(){var e=document.getElementById("ingredient-picker-overlay");e&&(e.classList.remove("is-visible"),setTimeout(function(){e.parentNode&&e.parentNode.removeChild(e)},350),null)}function M(e){for(var t=0,n=Object.keys(r),a=e+"--",o=0;o<n.length;o++)0===n[o].indexOf(a)&&(t+=r[n[o]].qty);return t}function O(e){var t=document.getElementById("count-"+e);t&&(t.textContent=M(e));for(var n=0,a=Object.keys(r),o=0;o<a.length;o++)"salsas"!==r[a[o]].categoryId&&(n+=r[a[o]].qty);E.textContent=n,q.hidden=0===n,n>0&&(q.classList.remove("is-bounce"),q.offsetWidth,q.classList.add("is-bounce")),ne()}function z(){I.addEventListener("touchstart",H,{passive:!0}),I.addEventListener("touchmove",P,{passive:!0}),I.addEventListener("touchend",Q,{passive:!0}),document.addEventListener("keydown",function(e){"ArrowRight"===e.key&&V(Math.min(c+1,l-1)),"ArrowLeft"===e.key&&V(Math.max(c-1,0))})}function H(e){if(!f){var t=e.touches[0];m=t.clientX,u=t.clientY,p=0,y=!1,I.classList.remove("is-animating")}}function P(e){if(!f){var t=e.touches[0],n=t.clientX-m,a=t.clientY-u;if(!(!y&&Math.abs(n)<10&&Math.abs(a)<10)){if(!y){if(Math.abs(a)>Math.abs(n))return;y=!0}if(y){p=n,(0===c&&n>0||c===l-1&&n<0)&&(p=.3*n);var o=100*-c,r=p/I.offsetWidth*100;I.style.transform="translateX("+(o+r)+"%)"}}}}function Q(){y&&(y=!1,Math.abs(p)>50?p<0&&c<l-1?V(c+1):p>0&&c>0?V(c-1):R():R())}function R(){I.classList.add("is-animating"),I.style.transform="translateX("+100*-c+"%)"}function V(e){if(!(e<0||e>=l)){c=e,I.classList.add("is-animating"),I.style.transform="translateX("+100*-e+"%)",function(e){var n=g.querySelectorAll(".menu__tab"),a=h.querySelectorAll(".menu__dot"),o=I.querySelectorAll(".menu__world"),r=o[e],i=r?r.dataset.zone:"",s=t[i]||{};n.forEach(function(t,n){t.classList.toggle("is-active",n===e)}),a.forEach(function(t,n){t.classList.toggle("is-active",n===e),n===e&&s.accent?t.style.background=s.accent:t.style.background=""}),s.accent&&g.style.setProperty("--tab-accent",s.accent)}(e),$(e);var n=I.querySelectorAll(".menu__world")[e];n&&!v[e]&&(v[e]=!0,function(e){var t=window.matchMedia("(prefers-reduced-motion: reduce)").matches,n=e.querySelector(".menu__world-character"),a=e.querySelector(".menu__world-title"),o=e.querySelector(".menu__world-quote"),r=e.querySelector(".menu__category-desc"),i=e.querySelector(".salsas__subtitle"),s=e.querySelectorAll(".menu__item"),d=e.querySelector(".salsas__image-wrap");if(t)return a&&(a.style.opacity="1"),o&&(o.style.opacity="1"),r&&(r.style.opacity="1"),i&&(i.style.opacity="1"),s.forEach(function(e){e.style.opacity="1"}),d&&(d.style.opacity="1"),void e.classList.add("is-entered");if("undefined"==typeof gsap)return a&&(a.style.opacity="1"),o&&(o.style.opacity="1"),r&&(r.style.opacity="1"),i&&(i.style.opacity="1"),s.forEach(function(e){e.style.opacity="1"}),void e.classList.add("is-entered");var l=gsap.timeline({onComplete:function(){e.classList.add("is-entered"),$(c)}});n&&l.fromTo(n,{opacity:0,scale:.5},{opacity:1,scale:1,duration:.35,ease:"back.out(1.7)"});a&&l.fromTo(a,{opacity:0,y:10},{opacity:1,y:0,duration:.3,ease:"power3.out"},n?"-=0.25":"0");o&&l.fromTo(o,{opacity:0,y:8},{opacity:1,y:0,duration:.25,ease:"power3.out"},"-=0.2");r&&l.fromTo(r,{opacity:0,y:8},{opacity:1,y:0,duration:.25,ease:"power3.out"},"-=0.15");i&&l.fromTo(i,{opacity:0,y:8},{opacity:1,y:0,duration:.25,ease:"power3.out"},"-=0.15");s.length>0&&l.fromTo(s,{opacity:0,y:15,scale:.97},{opacity:1,y:0,scale:1,duration:.3,stagger:.03,ease:"power3.out"},"-=0.2");d&&l.fromTo(d,{opacity:0,y:15},{opacity:1,y:0,duration:.3,ease:"power3.out"},"-=0.2")}(n)),function(e){var t=I.querySelectorAll(".menu__world");t.forEach(function(t,n){t.querySelectorAll("video").forEach(function(t){n===e?(t.dataset.src&&!t.src&&(t.src=t.dataset.src,t.removeAttribute("data-src")),t.play().catch(function(){})):t.paused||t.pause()})})}(e),b&&!b.classList.contains("is-hidden")&&b.classList.add("is-hidden"),f=!0,setTimeout(function(){f=!1},450)}}function $(e){var t=I.querySelectorAll(".menu__world")[e];if(t){var n=t.scrollHeight,a=window.matchMedia("(prefers-reduced-motion: reduce)").matches;"undefined"==typeof gsap||a?(_.style.height=n+"px","undefined"!=typeof ScrollTrigger&&ScrollTrigger.refresh()):gsap.to(_,{height:n,duration:.35,ease:"power2.out",onComplete:function(){"undefined"!=typeof ScrollTrigger&&ScrollTrigger.refresh()}})}}function F(e){for(var t=0;t<o.categories.length;t++)for(var n=o.categories[t],a=0;a<n.items.length;a++)if(n.items[a].id===e)return{item:n.items[a],categoryName:n.name,categoryId:n.id};return null}function D(e){var t=r[e]?null:F(e);if("salsas"===(r[e]?r[e].categoryId:t?t.categoryId:null)){if(r[e]&&r[e].qty>=1)return;if(function(){for(var e=0,t=Object.keys(r),n=0;n<t.length;n++)"salsas"===r[t[n]].categoryId&&(e+=r[t[n]].qty);return e}()>=2)return}if(!r[e]){if(!t)return;r[e]={item:t.item,qty:0,categoryName:t.categoryName,categoryId:t.categoryId}}r[e].qty++,W(e),G();var n=I.querySelector('[data-item-id="'+e+'"]');n&&(n.classList.add("has-items"),n.classList.remove("is-pulse"),n.offsetWidth,n.classList.add("is-pulse")),$(c)}function X(e){if(r[e]&&!(r[e].qty<=0)){r[e].qty--;var t=I.querySelector('[data-item-id="'+e+'"]');0===r[e].qty&&(delete r[e],t&&t.classList.remove("has-items")),W(e),G(),$(c)}}function W(e){var t=F(e);if(!t||!t.item.hasIngredients){var n=document.getElementById("count-"+e);n&&(n.textContent=r[e]?r[e].qty:0);for(var a=0,o=Object.keys(r),i=0;i<o.length;i++)"salsas"!==r[o[i]].categoryId&&(a+=r[o[i]].qty);E.textContent=a,q.hidden=0===a,a>0&&(q.classList.remove("is-bounce"),q.offsetWidth,q.classList.add("is-bounce")),ne()}}function Y(){for(var e=0,t=Object.keys(r),n={},a=[],o=0;o<t.length;o++){var i=r[t[o]];if(i.baseItemId){var s=i.baseItemId;n[s]||(n[s]={promoQty:0,nyTotal:0,baseItem:null}),"New York"===i.ingredientName?n[s].nyTotal+=i.qty*i.item.price:(n[s].promoQty+=i.qty,n[s].baseItem||(n[s].baseItem=F(s)))}else a.push(t[o])}for(var d=0;d<a.length;d++){var c=r[a[d]];e+=J(c.item,c.qty)}for(var l=Object.keys(n),m=0;m<l.length;m++){var u=n[l[m]];e+=u.nyTotal,u.promoQty>0&&u.baseItem&&(e+=U(u.promoQty,u.baseItem.item))}return e}function U(e,t){var n=t.promos||(t.promo?[t.promo]:[]);if(0===n.length)return e*t.price;for(var a=[0],o=1;o<=e;o++){a[o]=a[o-1]+t.price;for(var r=0;r<n.length;r++)if(o>=n[r].qty){var i=a[o-n[r].qty]+n[r].price;i<a[o]&&(a[o]=i)}}return a[e]}function J(e,t){if(e.promo&&t>=e.promo.qty){var n=Math.floor(t/e.promo.qty),a=t%e.promo.qty;return n*e.promo.price+a*e.price}return t*e.price}function G(){try{sessionStorage.setItem("ac14_cart",JSON.stringify(r))}catch(e){}}function K(){var e=document.getElementById("btn-get-location"),t=document.getElementById("location-status"),n=document.getElementById("location-error"),a=document.getElementById("location-link");if(n.hidden=!0,e.disabled=!0,e.textContent="Obteniendo...",!navigator.geolocation)return e.disabled=!1,e.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg> Obtener ubicacion',n.textContent="Tu navegador no soporta geolocalizacion.",void(n.hidden=!1);navigator.geolocation.getCurrentPosition(function(n){var o="https://maps.google.com/?q="+(d={lat:n.coords.latitude,lng:n.coords.longitude}).lat+","+d.lng;a.href=o,t.hidden=!1,e.disabled=!1,e.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg> Actualizar ubicacion',ne()},function(t){e.disabled=!1,e.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg> Obtener ubicacion';var a="No se pudo obtener tu ubicacion. ";1===t.code?a+="Permite el acceso a tu ubicacion en tu navegador.":2===t.code?a+="Ubicacion no disponible. Intenta de nuevo.":a+="Intenta de nuevo.",n.textContent=a,n.hidden=!1},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}function Z(){te(),w.hidden=!1,requestAnimationFrame(function(){w.classList.add("is-visible"),L.classList.add("is-open"),L.setAttribute("aria-hidden","false")}),document.body.style.overflow="hidden"}function ee(){w.classList.remove("is-visible"),L.classList.remove("is-open"),L.setAttribute("aria-hidden","true"),document.body.style.overflow="",setTimeout(function(){w.hidden=!0},300)}function te(){for(var e=[],t=Object.keys(r),n=0;n<t.length;n++)e.push(r[t[n]]);var a=e.length>0;if(C.hidden=a,k.hidden=!a,"dine-in"===i)B.textContent="Para Comer Aqui",x.textContent="";else if("takeaway"===i)if(B.textContent="Para Llevar","location"===s&&d){var o="https://maps.google.com/?q="+d.lat+","+d.lng,c=document.getElementById("location-ref").value;x.innerHTML='<a href="'+o+'" target="_blank" rel="noopener" style="color:var(--orange);text-decoration:underline;">Ver ubicacion en mapa</a>',c&&(x.innerHTML+=" &middot; "+c)}else{var l=[document.getElementById("address-street").value,document.getElementById("address-colonia").value,document.getElementById("address-ref").value].filter(Boolean);x.textContent=l.length?l.join(", "):""}else B.textContent="Selecciona tipo de pedido",x.textContent="";if(a){for(var m={},u=0;u<e.length;u++){var p=e[u];p.baseItemId&&(m[p.baseItemId]||(m[p.baseItemId]={promoQty:0}),"New York"!==p.ingredientName&&(m[p.baseItemId].promoQty+=p.qty))}k.innerHTML=e.map(function(e){var t,n=e.item.name,a=e.categoryName,o=e.item.id,r=!!e.baseItemId;if(r){if(n=e.item.name+" ‚Äî "+e.ingredientName,t=e.qty*e.item.price,"New York"!==e.ingredientName){var i=m[e.baseItemId],s=F(e.baseItemId);if(s&&i){for(var d=s.item.promos||(s.item.promo?[s.item.promo]:[]),c=null,l=d.length-1;l>=0;l--)if(i.promoQty>=d[l].qty){c=d[l];break}c&&(a+=" (promo aplicada)")}}}else t=J(e.item,e.qty),e.item.promo&&e.qty>=e.item.promo.qty&&(a+=" ("+Math.floor(e.qty/e.item.promo.qty)+"x promo)");return'<div class="sheet-item"><div class="sheet-item__info"><div class="sheet-item__name">'+n+'</div><div class="sheet-item__detail">'+a+'</div></div><div class="sheet-item__stepper"><button class="stepper__btn stepper__btn--minus" data-sheet-action="minus" data-id="'+o+'"'+(r?' data-compound="true" data-base-id="'+e.baseItemId+'"':"")+' aria-label="Quitar uno">‚àí</button><span class="stepper__count">'+e.qty+'</span><button class="stepper__btn stepper__btn--plus" data-sheet-action="plus" data-id="'+o+'"'+(r?' data-compound="true" data-base-id="'+e.baseItemId+'"':"")+' aria-label="Agregar uno">+</button></div><span class="sheet-item__subtotal">'+(t>0?"$"+t:"Incluida")+"</span></div>"}).join(""),k.querySelectorAll(".stepper__btn").forEach(function(e){e.addEventListener("click",function(){var t=e.dataset.id,n=e.dataset.sheetAction;if("true"===e.dataset.compound){if("plus"===n&&r[t]&&(r[t].qty++,O(e.dataset.baseId),G()),"minus"===n&&r[t]&&r[t].qty>0){r[t].qty--,0===r[t].qty&&delete r[t],O(e.dataset.baseId),G();var a=M(e.dataset.baseId),o=I.querySelector('[data-item-id="'+e.dataset.baseId+'"]');o&&0===a&&o.classList.remove("has-items")}}else"plus"===n&&D(t),"minus"===n&&X(t);te()})});var y=Y(),f=function(){for(var e=0,t=Object.keys(r),n=0;n<t.length;n++){var a=r[t[n]];e+=a.qty*a.item.price}return e}(),v=f-y;S.textContent="$"+y;var g=document.getElementById("sheet-savings"),h=document.getElementById("sheet-savings-value");g&&h&&(v>0?(h.textContent="-$"+v,g.hidden=!1):g.hidden=!0)}else S.textContent="$0"}function ne(){var e=Object.keys(r).length>0,t=document.getElementById("customer-name").value.trim().length>0,n=null!==i,a=!0;if("takeaway"===i&&"write"===s){var o=document.getElementById("address-street").value.trim(),d=document.getElementById("address-colonia").value.trim();a=o.length>0&&d.length>0}T.disabled=!(e&&t&&n&&a)}function ae(){var e=document.getElementById("customer-name").value.trim();if(e){var t="Hola! Quiero hacer un pedido:\n\n";if("dine-in"===i)t+="*Para Comer Aqui*\n";else if(t+="*Para Llevar*\n","location"===s&&d){t+="Ubicacion: https://maps.google.com/?q="+d.lat+","+d.lng+"\n";var n=document.getElementById("location-ref").value.trim();n&&(t+="Referencia: "+n+"\n")}else{var a=[document.getElementById("address-street").value.trim(),document.getElementById("address-colonia").value.trim(),document.getElementById("address-ref").value.trim()].filter(Boolean);a.length&&(t+="Direccion: "+a.join(", ")+"\n")}t+="\n";for(var o=Object.keys(r),c=0;c<o.length;c++){var l,m,u=r[o[c]],p=!!u.baseItemId;p?(l=u.qty*u.item.price,m=u.item.name+" ("+u.ingredientName+")"):(l=J(u.item,u.qty),m=u.item.name);var y="- "+u.qty+"x "+u.categoryName+" "+m+(l>0?" ($"+l+")":" (incluida)");if(!p&&u.item.promo&&u.qty>=u.item.promo.qty)y+=" ["+Math.floor(u.qty/u.item.promo.qty)+"x promo "+u.item.promo.label+"]";t+=y+"\n"}for(var f={},v=0;v<o.length;v++){var g=r[o[v]];g.baseItemId&&"New York"!==g.ingredientName&&(f[g.baseItemId]||(f[g.baseItemId]=0),f[g.baseItemId]+=g.qty)}for(var h=Object.keys(f),b=0;b<h.length;b++){var _=F(h[b]);if(_){var L=f[h[b]],w=L*_.item.price,k=U(L,_.item);k<w&&(t+="  ["+_.item.name+": promo aplicada ‚Äî $"+k+"]\n")}}t+="\n*Total: $"+Y()+"*\n",t+="\nNombre: "+e;var C="https://wa.me/5214461060320?text="+encodeURIComponent(t);window.open(C,"_blank","noopener"),function(){var e=document.getElementById("order-confirm-overlay");e&&e.parentNode.removeChild(e);var t=document.createElement("div");t.className="order-confirm-overlay",t.id="order-confirm-overlay",t.innerHTML='<div class="order-confirm"><img src="assets/generated/cart-celebration.webp" alt="Celebracion!" class="order-confirm__img" loading="lazy"><p class="order-confirm__question">Enviaste tu pedido?</p><div class="order-confirm__actions"><button class="order-confirm__btn order-confirm__btn--yes">Si, lo envie!</button><button class="order-confirm__btn order-confirm__btn--no">Todavia no</button></div></div>',document.body.appendChild(t),requestAnimationFrame(function(){t.classList.add("is-visible")});var n=t.querySelector(".order-confirm__btn--yes"),a=t.querySelector(".order-confirm__btn--no");n.addEventListener("click",function(){!function(){r={},G();for(var e=I.querySelectorAll(".stepper__count"),t=0;t<e.length;t++)e[t].textContent="0";for(var n=I.querySelectorAll(".menu__item.has-items"),a=0;a<n.length;a++)n[a].classList.remove("has-items");E.textContent="0",q.hidden=!0,ne(),te()}(),t.querySelector(".order-confirm__question").textContent="Pedido enviado! Gracias!",t.querySelector(".order-confirm__actions").remove(),setTimeout(function(){t.classList.remove("is-visible"),setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},300),ee()},1500)}),a.addEventListener("click",function(){t.classList.remove("is-visible"),setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},300)})}()}}function oe(){var e=document.getElementById("hero-title");if(e&&"true"!==e.dataset.split){var t=e.textContent.trim();e.innerHTML="";for(var n=0;n<t.length;n++){var a=document.createElement("span");a.className="hero__letter",a.textContent=t[n],e.appendChild(a)}e.dataset.split="true"}}"scrollRestoration"in history&&(history.scrollRestoration="manual"),document.addEventListener("DOMContentLoaded",function(){window.scrollTo(0,0),fetch("data/menu.json").then(function(e){return e.json()}).then(function(e){var i,s;i=(o=e).categories.map(function(e){return e.id}),l=i.length,g.innerHTML=i.map(function(e){var t=n[e]||{emoji:"",short:e};return'<button class="menu__tab" data-world-index="'+i.indexOf(e)+'" data-category="'+e+'">'+t.emoji+" "+t.short+"</button>"}).join(""),h.innerHTML=i.map(function(e,t){return'<button class="menu__dot" data-world-index="'+t+'" aria-label="'+(n[e]||{}).short+'"></button>'}).join(""),g.addEventListener("click",function(e){var t=e.target.closest(".menu__tab");t&&V(parseInt(t.dataset.worldIndex,10))}),h.addEventListener("click",function(e){var t=e.target.closest(".menu__dot");t&&V(parseInt(t.dataset.worldIndex,10))}),s="",o.categories.forEach(function(e){s+=function(e){var n=t[e.id]||{},o="";n.characterVideo&&(o='<div class="menu__world-character"><video src="'+n.characterVideo+'" poster="'+(n.character||"")+'" autoplay loop muted playsinline loading="lazy"></video></div>');var i='<div class="menu__world-header"><div class="menu__world-header-row"><div class="menu__world-header-text"><h3 class="menu__world-title">'+(e.icon||"")+" "+e.name+"</h3>";n.quote&&(i+='<p class="menu__world-quote">"'+n.quote+'"</p>'),e.description&&(i+='<p class="menu__category-desc">'+e.description+"</p>"),i+="</div>"+o+"</div></div>";var s=e.items.map(function(e){return function(e){var t=r[e.id]?r[e.id].qty:0,n="";e.promos?n=e.promos.map(function(e){return'<div class="menu__item-promo"><span class="menu__item-promo-label">Promo</span><span class="menu__item-promo-value">'+e.label+"</span></div>"}).join(""):e.promo&&(n='<div class="menu__item-promo"><span class="menu__item-promo-label">Promo</span><span class="menu__item-promo-value">'+e.promo.label+"</span></div>");var o="";e.variant&&(o='<span class="menu__item-variant">'+e.variant.name+": $"+e.variant.price+"</span>");var i=-1!==a.indexOf(e.id);return'<div class="menu__item'+(i?" menu__item--premium":"")+(t>0?" has-items":"")+'" data-item-id="'+e.id+'"><span class="menu__item-name">'+e.name+'</span><span class="menu__item-price">'+(0===e.price?"Incluida":"$"+e.price)+"</span>"+n+o+'<div class="stepper"><button class="stepper__btn stepper__btn--minus" data-action="minus" data-id="'+e.id+'" aria-label="Quitar uno">‚àí</button><span class="stepper__count" id="count-'+e.id+'">'+t+'</span><button class="stepper__btn stepper__btn--plus" data-action="plus" data-id="'+e.id+'" aria-label="Agregar uno">+</button></div></div>'}(e)}).join(""),d="";return e.note&&(d='<p class="menu__category-note">* '+e.note+"</p>"),'<div class="menu__world" data-zone="'+e.id+'">'+i+'<div class="menu__items">'+s+"</div>"+d+"</div>"}(e)}),I.innerHTML=s,I.addEventListener("click",j)}).catch(function(e){console.error("Error loading menu:",e),I.innerHTML='<p style="text-align:center;padding:2rem;color:var(--white-dim);">No se pudo cargar el menu.</p>'}).then(function(){var e,t;document.querySelectorAll(".order-card").forEach(function(e){e.addEventListener("click",function(){!function(e){i=e;var t=document.getElementById("order-type-cards");document.querySelectorAll(".order-card").forEach(function(t){t.setAttribute("aria-pressed",t.dataset.type===e)}),t.classList.add("has-selection"),N.hidden="takeaway"!==e;var n=document.getElementById("menu");n&&!n.classList.contains("is-visible")&&(n.classList.add("is-visible"),ScrollTrigger.refresh()),ne()}(e.dataset.type)})}),(t=document.getElementById("address-toggle"))&&t.addEventListener("click",function(e){var t=e.target.closest(".address-toggle__btn");t&&function(e){s=e;var t=document.getElementById("address-fields"),n=document.getElementById("location-share");document.querySelectorAll(".address-toggle__btn").forEach(function(t){t.classList.toggle("is-active",t.dataset.mode===e)}),"write"===e?(t.hidden=!1,n.hidden=!0):(t.hidden=!0,n.hidden=!1),ne()}(t.dataset.mode)}),(e=document.getElementById("btn-get-location"))&&e.addEventListener("click",K),q.addEventListener("click",Z),function(){try{var e=sessionStorage.getItem("ac14_cart");if(!e)return;var t=JSON.parse(e);if(!t||"object"!=typeof t)return;for(var n=Object.keys(t),a=0;a<n.length;a++){var o=t[n[a]];if(o&&o.item&&o.qty){if(!o.baseItemId){var i=F(n[a]);if(i&&i.item.hasIngredients)continue}r[n[a]]=o}}for(var s=0,d=Object.keys(r),c=0;c<d.length;c++){var l=r[d[c]];if("salsas"!==l.categoryId&&(s+=l.qty),l.baseItemId){var m=document.getElementById("count-"+l.baseItemId);m&&(m.textContent=M(l.baseItemId));var u=I.querySelector('[data-item-id="'+l.baseItemId+'"]');u&&u.classList.add("has-items")}else{var p=document.getElementById("count-"+l.item.id);p&&(p.textContent=l.qty);var y=I.querySelector('[data-item-id="'+l.item.id+'"]');y&&y.classList.add("has-items")}}E.textContent=s,q.hidden=0===s}catch(e){r={}}}(),w.addEventListener("click",ee),L.querySelector(".bottom-sheet__handle").addEventListener("click",ee),T.addEventListener("click",ae),document.getElementById("customer-name").addEventListener("input",ne),document.getElementById("address-street").addEventListener("input",ne),document.getElementById("address-colonia").addEventListener("input",ne),function(){var e=document.getElementById("qr-modal-code"),t=document.getElementById("qr-download-btn"),n=document.getElementById("qr-modal-overlay"),a=document.getElementById("qr-modal-download"),o=document.getElementById("qr-modal-close");if(!e||"undefined"==typeof QRCode)return;e.innerHTML="",new QRCode(e,{text:"https://asador.ganaderiacatorce.com",width:200,height:200,colorDark:"#D4231A",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}),t.addEventListener("click",function(){n.classList.add("is-visible")}),o.addEventListener("click",function(){n.classList.remove("is-visible")}),n.addEventListener("click",function(e){e.target===n&&n.classList.remove("is-visible")}),a.addEventListener("click",function(){var t=e.querySelector("canvas");if(t){var n=document.createElement("a");n.download="asador-callejero-catorce-qr.png",n.href=t.toDataURL("image/png"),n.click()}})}(),function(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){return document.querySelectorAll(".hero__logo, .hero__subtitle, .hero__title, .hero__tagline, .hero__hours, .hero__bottom-info, .qr-download-btn").forEach(function(e){e.style.opacity="1"}),document.querySelectorAll(".menu__world-title, .menu__world-quote, .menu__category-desc, .menu__item, .salsas__subtitle").forEach(function(e){e.style.opacity="1"}),document.querySelectorAll(".menu__world").forEach(function(e){e.classList.add("is-entered")}),oe(),document.querySelectorAll(".hero__letter").forEach(function(e){e.style.opacity="1"}),function(){var e=document.getElementById("menu");if(!e)return;var t=.2*window.innerHeight;window.addEventListener("scroll",function(){var n=e.getBoundingClientRect(),a=n.top<=t&&n.bottom>0;g.classList.toggle("is-visible",a)},{passive:!0})}(),z(),V(0),void window.addEventListener("resize",function(){$(c)})}gsap.registerPlugin(ScrollTrigger),oe();var e=gsap.timeline({delay:.3});e.fromTo(".hero__logo",{opacity:0,scale:.8,filter:"blur(10px)"},{opacity:1,scale:1,filter:"blur(0px)",duration:.8,ease:"back.out(1.7)"}),e.fromTo(".hero__subtitle",{opacity:0,letterSpacing:"0.4em"},{opacity:1,letterSpacing:"0.15em",duration:.6,ease:"power3.out"},"-=0.3"),e.set(".hero__title",{opacity:1}),e.fromTo(".hero__letter",{opacity:0,y:40,rotateX:-90},{opacity:1,y:0,rotateX:0,duration:.5,stagger:.06,ease:"back.out(2.5)"},"-=0.2"),e.fromTo(".hero__tagline",{opacity:0,y:20},{opacity:1,y:0,duration:.5,ease:"power3.out"},"-=0.2"),e.fromTo(".hero__tagline--top",{opacity:0,y:-10},{opacity:1,y:0,duration:.5,ease:"power3.out"},"-=0.3"),e.fromTo(".hero__bottom-info",{opacity:0,y:15},{opacity:1,y:0,duration:.6,ease:"power3.out"},"-=0.2"),e.fromTo(".qr-download-btn",{opacity:0},{opacity:1,duration:.4,ease:"power2.out"},"-=0.4");var t=document.querySelector(".hero__bottom-info"),n=document.querySelector(".hero");t&&n&&gsap.to(t,{opacity:0,ease:"none",scrollTrigger:{trigger:n,start:"10% top",end:"30% top",scrub:!0}});var a=document.getElementById("menu");a&&ScrollTrigger.create({trigger:a,start:"top 80%",end:"bottom top",onEnter:function(){g.classList.add("is-visible")},onLeave:function(){g.classList.remove("is-visible")},onEnterBack:function(){g.classList.add("is-visible")},onLeaveBack:function(){g.classList.remove("is-visible")}});[".order-type",".footer"].forEach(function(e){var t=document.querySelector(e);t&&gsap.fromTo(t,{opacity:0,y:40},{opacity:1,y:0,duration:.8,ease:"power3.out",scrollTrigger:{trigger:t,start:"top 85%",once:!0}})}),requestAnimationFrame(function(){ScrollTrigger.refresh(),z(),V(0)}),window.addEventListener("resize",function(){$(c)})}()})})}();