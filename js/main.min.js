!function(){"use strict";var e={tacos:{character:"assets/generated/zone-tacos.webp",characterVideo:"assets/generated/zone-tacos.mp4",accent:"#D4231A",quote:"Los tacos son mi vida, guero!"},quesadillas:{character:"assets/generated/zone-quesadillas.webp",characterVideo:"assets/generated/zone-quesadillas.mp4",accent:"#F9A825",quote:"Con quesito, todo sabe mejor."},charolas:{character:"assets/generated/zone-charolas.webp",characterVideo:"assets/generated/zone-charolas.mp4",accent:"#BF360C",quote:"Pa' los que van en serio."},especialidades:{character:"assets/generated/zone-especialidades.webp",characterVideo:"assets/generated/zone-especialidades.mp4",accent:"#8D6E63",quote:"Lo mejor de la casa, compadre."},bebidas:{character:"assets/generated/zone-bebidas.webp",characterVideo:"assets/generated/zone-bebidas.mp4",accent:"#558B2F",quote:"Pa' refrescar el alma!"},postres:{character:"assets/generated/zone-postres.webp",characterVideo:"assets/generated/zone-postres.mp4",accent:"#E91E63",quote:"El broche de oro, mi amor."},salsas:{character:"assets/generated/salsas-scene.webp",characterVideo:"assets/generated/salsas-scene.mp4",accent:"#F44336",quote:"El toque que le faltaba a tu taco!"}},t={tacos:{emoji:"üåÆ",short:"Tacos"},quesadillas:{emoji:"üßÄ",short:"Quesadillas"},charolas:{emoji:"ü•©",short:"Charolas"},especialidades:{emoji:"‚≠ê",short:"Especialidades"},bebidas:{emoji:"ü•§",short:"Bebidas"},postres:{emoji:"üç∞",short:"Postres"},salsas:{emoji:"üå∂Ô∏è",short:"Salsas"}},o=["taco-newyork","quesa-newyork","charola-combinada","charola-diezmillo","chavindeca","papa-grill"],a=null,n={},r=null,i="write",s=null,c=0,d=0,l=0,u=0,m=0,p=!1,y=!1,f={},g=document.getElementById("menu-nav"),h=document.getElementById("menu-dots"),v=document.getElementById("menu-worlds"),_=document.getElementById("menu-worlds-track"),b=document.getElementById("cart-fab"),E=document.getElementById("cart-badge"),q=document.getElementById("bottom-sheet"),w=document.getElementById("sheet-overlay"),L=document.getElementById("sheet-items"),I=document.getElementById("sheet-empty"),B=document.getElementById("sheet-order-type"),k=document.getElementById("sheet-address"),x=document.getElementById("sheet-total-value"),T=document.getElementById("btn-send"),S=document.getElementById("address-form");function A(e){var t=e.target.closest(".stepper__btn");if(t){var o=t.dataset.id,a=t.dataset.action;"plus"===a&&V(o),"minus"===a&&N(o)}}function C(){_.addEventListener("touchstart",j,{passive:!0}),_.addEventListener("touchmove",M,{passive:!0}),_.addEventListener("touchend",z,{passive:!0}),document.addEventListener("keydown",function(e){"ArrowRight"===e.key&&O(Math.min(c+1,d-1)),"ArrowLeft"===e.key&&O(Math.max(c-1,0))})}function j(e){if(!y){var t=e.touches[0];l=t.clientX,u=t.clientY,m=0,p=!1,_.classList.remove("is-animating")}}function M(e){if(!y){var t=e.touches[0],o=t.clientX-l,a=t.clientY-u;if(!(!p&&Math.abs(o)<10&&Math.abs(a)<10)){if(!p){if(Math.abs(a)>Math.abs(o))return;p=!0}if(p){m=o,(0===c&&o>0||c===d-1&&o<0)&&(m=.3*o);var n=100*-c,r=m/_.offsetWidth*100;_.style.transform="translateX("+(n+r)+"%)"}}}}function z(){p&&(p=!1,Math.abs(m)>50?m<0&&c<d-1?O(c+1):m>0&&c>0?O(c-1):H():H())}function H(){_.classList.add("is-animating"),_.style.transform="translateX("+100*-c+"%)"}function O(t){if(!(t<0||t>=d)){c=t,_.classList.add("is-animating"),_.style.transform="translateX("+100*-t+"%)",function(t){var o=g.querySelectorAll(".menu__tab"),a=h.querySelectorAll(".menu__dot"),n=_.querySelectorAll(".menu__world"),r=n[t],i=r?r.dataset.zone:"",s=e[i]||{};o.forEach(function(e,o){e.classList.toggle("is-active",o===t)}),a.forEach(function(e,o){e.classList.toggle("is-active",o===t),o===t&&s.accent?e.style.background=s.accent:e.style.background=""}),s.accent&&g.style.setProperty("--tab-accent",s.accent)}(t),P(t);var o=_.querySelectorAll(".menu__world")[t];o&&!f[t]&&(f[t]=!0,function(e){var t=window.matchMedia("(prefers-reduced-motion: reduce)").matches,o=e.querySelector(".menu__world-character"),a=e.querySelector(".menu__world-title"),n=e.querySelector(".menu__world-quote"),r=e.querySelector(".menu__category-desc"),i=e.querySelector(".salsas__subtitle"),s=e.querySelectorAll(".menu__item"),c=e.querySelector(".salsas__image-wrap");if(t)return a&&(a.style.opacity="1"),n&&(n.style.opacity="1"),r&&(r.style.opacity="1"),i&&(i.style.opacity="1"),s.forEach(function(e){e.style.opacity="1"}),c&&(c.style.opacity="1"),void e.classList.add("is-entered");if("undefined"==typeof gsap)return a&&(a.style.opacity="1"),n&&(n.style.opacity="1"),r&&(r.style.opacity="1"),i&&(i.style.opacity="1"),s.forEach(function(e){e.style.opacity="1"}),void e.classList.add("is-entered");var d=gsap.timeline({onComplete:function(){e.classList.add("is-entered")}});o&&d.fromTo(o,{opacity:0,scale:.5},{opacity:1,scale:1,duration:.5,ease:"back.out(1.7)"});a&&d.fromTo(a,{opacity:0,y:15},{opacity:1,y:0,duration:.5,ease:"power3.out"},o?"-=0.3":"0");n&&d.fromTo(n,{opacity:0,y:10},{opacity:1,y:0,duration:.4,ease:"power3.out"},"-=0.2");r&&d.fromTo(r,{opacity:0,y:10},{opacity:1,y:0,duration:.4,ease:"power3.out"},"-=0.2");i&&d.fromTo(i,{opacity:0,y:10},{opacity:1,y:0,duration:.4,ease:"power3.out"},"-=0.2");s.length>0&&d.fromTo(s,{opacity:0,y:25,scale:.95},{opacity:1,y:0,scale:1,duration:.4,stagger:.06,ease:"power3.out"},"-=0.2");c&&d.fromTo(c,{opacity:0,y:20},{opacity:1,y:0,duration:.5,ease:"power3.out"},"-=0.2")}(o)),function(e){var t=_.querySelectorAll(".menu__world");t.forEach(function(t,o){t.querySelectorAll("video").forEach(function(t){o===e?(t.dataset.src&&!t.src&&(t.src=t.dataset.src,t.removeAttribute("data-src")),t.play().catch(function(){})):t.paused||t.pause()})})}(t),y=!0,setTimeout(function(){y=!1},450)}}function P(e){var t=_.querySelectorAll(".menu__world")[e];if(t){var o=t.scrollHeight,a=window.matchMedia("(prefers-reduced-motion: reduce)").matches;"undefined"==typeof gsap||a?v.style.height=o+"px":gsap.to(v,{height:o,duration:.35,ease:"power2.out"})}}function V(e){var t=n[e]?null:function(e){for(var t=0;t<a.categories.length;t++)for(var o=a.categories[t],n=0;n<o.items.length;n++)if(o.items[n].id===e)return{item:o.items[n],categoryName:o.name,categoryId:o.id};return null}(e);if("salsas"===(n[e]?n[e].categoryId:t?t.categoryId:null)){if(n[e]&&n[e].qty>=1)return;if(function(){for(var e=0,t=Object.keys(n),o=0;o<t.length;o++)"salsas"===n[t[o]].categoryId&&(e+=n[t[o]].qty);return e}()>=2)return}if(!n[e]){if(!t)return;n[e]={item:t.item,qty:0,categoryName:t.categoryName,categoryId:t.categoryId}}n[e].qty++,R(e);var o=_.querySelector('[data-item-id="'+e+'"]');o&&(o.classList.add("has-items"),o.classList.remove("is-pulse"),o.offsetWidth,o.classList.add("is-pulse")),P(c)}function N(e){if(n[e]&&!(n[e].qty<=0)){n[e].qty--;var t=_.querySelector('[data-item-id="'+e+'"]');0===n[e].qty&&(delete n[e],t&&t.classList.remove("has-items")),R(e),P(c)}}function R(e){var t=document.getElementById("count-"+e);t&&(t.textContent=n[e]?n[e].qty:0);for(var o=0,a=Object.keys(n),r=0;r<a.length;r++)"salsas"!==n[a[r]].categoryId&&(o+=n[a[r]].qty);E.textContent=o,b.hidden=0===o,o>0&&(b.classList.remove("is-bounce"),b.offsetWidth,b.classList.add("is-bounce")),W()}function D(){for(var e=0,t=Object.keys(n),o=0;o<t.length;o++){var a=n[t[o]];e+=Q(a.item,a.qty)}return e}function Q(e,t){if(e.promo&&t>=e.promo.qty){var o=Math.floor(t/e.promo.qty),a=t%e.promo.qty;return o*e.promo.price+a*e.price}return t*e.price}function X(){var e=document.getElementById("btn-get-location"),t=document.getElementById("location-status"),o=document.getElementById("location-error"),a=document.getElementById("location-link");if(o.hidden=!0,e.disabled=!0,e.textContent="Obteniendo...",!navigator.geolocation)return e.disabled=!1,e.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg> Obtener ubicacion',o.textContent="Tu navegador no soporta geolocalizacion.",void(o.hidden=!1);navigator.geolocation.getCurrentPosition(function(o){var n="https://maps.google.com/?q="+(s={lat:o.coords.latitude,lng:o.coords.longitude}).lat+","+s.lng;a.href=n,t.hidden=!1,e.disabled=!1,e.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg> Actualizar ubicacion',W()},function(t){e.disabled=!1,e.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg> Obtener ubicacion';var a="No se pudo obtener tu ubicacion. ";1===t.code?a+="Permite el acceso a tu ubicacion en tu navegador.":2===t.code?a+="Ubicacion no disponible. Intenta de nuevo.":a+="Intenta de nuevo.",o.textContent=a,o.hidden=!1},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}function $(){U(),w.hidden=!1,requestAnimationFrame(function(){w.classList.add("is-visible"),q.classList.add("is-open"),q.setAttribute("aria-hidden","false")}),document.body.style.overflow="hidden"}function F(){w.classList.remove("is-visible"),q.classList.remove("is-open"),q.setAttribute("aria-hidden","true"),document.body.style.overflow="",setTimeout(function(){w.hidden=!0},300)}function U(){for(var e=[],t=Object.keys(n),o=0;o<t.length;o++)e.push(n[t[o]]);var a=e.length>0;if(I.hidden=a,L.hidden=!a,"dine-in"===r)B.textContent="Para Comer Aqui",k.textContent="";else if("takeaway"===r)if(B.textContent="Para Llevar","location"===i&&s){var c="https://maps.google.com/?q="+s.lat+","+s.lng,d=document.getElementById("location-ref").value;k.innerHTML='<a href="'+c+'" target="_blank" rel="noopener" style="color:var(--orange);text-decoration:underline;">Ver ubicacion en mapa</a>',d&&(k.innerHTML+=" &middot; "+d)}else{var l=[document.getElementById("address-street").value,document.getElementById("address-colonia").value,document.getElementById("address-ref").value].filter(Boolean);k.textContent=l.length?l.join(", "):""}else B.textContent="Selecciona tipo de pedido",k.textContent="";a?(L.innerHTML=e.map(function(e){var t=Q(e.item,e.qty),o=e.categoryName;e.item.promo&&e.qty>=e.item.promo.qty&&(o+=" ("+Math.floor(e.qty/e.item.promo.qty)+"x promo)");return'<div class="sheet-item"><div class="sheet-item__info"><div class="sheet-item__name">'+e.item.name+'</div><div class="sheet-item__detail">'+o+'</div></div><div class="sheet-item__stepper"><button class="stepper__btn stepper__btn--minus" data-sheet-action="minus" data-id="'+e.item.id+'" aria-label="Quitar uno">‚àí</button><span class="stepper__count">'+e.qty+'</span><button class="stepper__btn stepper__btn--plus" data-sheet-action="plus" data-id="'+e.item.id+'" aria-label="Agregar uno">+</button></div><span class="sheet-item__subtotal">'+(t>0?"$"+t:"Incluida")+"</span></div>"}).join(""),L.querySelectorAll(".stepper__btn").forEach(function(e){e.addEventListener("click",function(){var t=e.dataset.id,o=e.dataset.sheetAction;"plus"===o&&V(t),"minus"===o&&N(t),U()})}),x.textContent="$"+D()):x.textContent="$0"}function W(){var e=Object.keys(n).length>0,t=document.getElementById("customer-name").value.trim().length>0,o=null!==r;T.disabled=!(e&&t&&o)}function Y(){var e=document.getElementById("customer-name").value.trim();if(e){var t="Hola! Quiero hacer un pedido:\n\n";if("dine-in"===r)t+="*Para Comer Aqui*\n";else if(t+="*Para Llevar*\n","location"===i&&s){t+="Ubicacion: https://maps.google.com/?q="+s.lat+","+s.lng+"\n";var o=document.getElementById("location-ref").value.trim();o&&(t+="Referencia: "+o+"\n")}else{var a=[document.getElementById("address-street").value.trim(),document.getElementById("address-colonia").value.trim(),document.getElementById("address-ref").value.trim()].filter(Boolean);a.length&&(t+="Direccion: "+a.join(", ")+"\n")}t+="\n";for(var c=Object.keys(n),d=0;d<c.length;d++){var l=n[c[d]],u=Q(l.item,l.qty),m="- "+l.qty+"x "+l.categoryName+" "+l.item.name+(u>0?" ($"+u+")":" (incluida)");if(l.item.promo&&l.qty>=l.item.promo.qty)m+=" ["+Math.floor(l.qty/l.item.promo.qty)+"x promo "+l.item.promo.label+"]";t+=m+"\n"}t+="\n*Total: $"+D()+"*\n",t+="\nNombre: "+e;var p="https://wa.me/5214461060320?text="+encodeURIComponent(t);window.open(p,"_blank","noopener");var y=document.getElementById("sheet-celebration");y&&(y.hidden=!1,setTimeout(function(){y.hidden=!0},4e3))}}function G(){var e=document.getElementById("hero-title");if(e&&"true"!==e.dataset.split){var t=e.textContent.trim();e.innerHTML="";for(var o=0;o<t.length;o++){var a=document.createElement("span");a.className="hero__letter",a.textContent=t[o],e.appendChild(a)}e.dataset.split="true"}}document.addEventListener("DOMContentLoaded",function(){fetch("data/menu.json").then(function(e){return e.json()}).then(function(r){var i,s;i=(a=r).categories.map(function(e){return e.id}),d=i.length,g.innerHTML=i.map(function(e){var o=t[e]||{emoji:"",short:e};return'<button class="menu__tab" data-world-index="'+i.indexOf(e)+'" data-category="'+e+'">'+o.emoji+" "+o.short+"</button>"}).join(""),h.innerHTML=i.map(function(e,o){return'<button class="menu__dot" data-world-index="'+o+'" aria-label="'+(t[e]||{}).short+'"></button>'}).join(""),g.addEventListener("click",function(e){var t=e.target.closest(".menu__tab");t&&O(parseInt(t.dataset.worldIndex,10))}),h.addEventListener("click",function(e){var t=e.target.closest(".menu__dot");t&&O(parseInt(t.dataset.worldIndex,10))}),s="",a.categories.forEach(function(t){s+=function(t){var a=e[t.id]||{},r="";a.characterVideo&&(r='<div class="menu__world-character"><video src="'+a.characterVideo+'" poster="'+(a.character||"")+'" autoplay loop muted playsinline loading="lazy"></video></div>');var i='<div class="menu__world-header"><div class="menu__world-header-row"><div class="menu__world-header-text"><h3 class="menu__world-title">'+(t.icon||"")+" "+t.name+"</h3>";a.quote&&(i+='<p class="menu__world-quote">"'+a.quote+'"</p>'),t.description&&(i+='<p class="menu__category-desc">'+t.description+"</p>"),i+="</div>"+r+"</div></div>";var s=t.items.map(function(e){return function(e){var t=n[e.id]?n[e.id].qty:0,a="";e.promo&&(a='<span class="menu__item-promo">'+e.promo.label+"</span>");var r="";e.variant&&(r='<span class="menu__item-variant">'+e.variant.name+": $"+e.variant.price+"</span>");var i=-1!==o.indexOf(e.id);return'<div class="menu__item'+(i?" menu__item--premium":"")+(t>0?" has-items":"")+'" data-item-id="'+e.id+'"><span class="menu__item-name">'+e.name+'</span><span class="menu__item-price">'+(0===e.price?"Incluida":"$"+e.price)+"</span>"+a+r+'<div class="stepper"><button class="stepper__btn stepper__btn--minus" data-action="minus" data-id="'+e.id+'" aria-label="Quitar uno">‚àí</button><span class="stepper__count" id="count-'+e.id+'">'+t+'</span><button class="stepper__btn stepper__btn--plus" data-action="plus" data-id="'+e.id+'" aria-label="Agregar uno">+</button></div></div>'}(e)}).join(""),c="";return t.note&&(c='<p class="menu__category-note">* '+t.note+"</p>"),'<div class="menu__world" data-zone="'+t.id+'">'+i+'<div class="menu__items">'+s+"</div>"+c+"</div>"}(t)}),_.innerHTML=s,_.addEventListener("click",A)}).catch(function(e){console.error("Error loading menu:",e),_.innerHTML='<p style="text-align:center;padding:2rem;color:var(--white-dim);">No se pudo cargar el menu.</p>'}).then(function(){var e,t;document.querySelectorAll(".order-card").forEach(function(e){e.addEventListener("click",function(){!function(e){r=e;var t=document.getElementById("order-type-cards");document.querySelectorAll(".order-card").forEach(function(t){t.setAttribute("aria-pressed",t.dataset.type===e)}),t.classList.add("has-selection"),S.hidden="takeaway"!==e}(e.dataset.type)})}),(t=document.getElementById("address-toggle"))&&t.addEventListener("click",function(e){var t=e.target.closest(".address-toggle__btn");t&&function(e){i=e;var t=document.getElementById("address-fields"),o=document.getElementById("location-share");document.querySelectorAll(".address-toggle__btn").forEach(function(t){t.classList.toggle("is-active",t.dataset.mode===e)}),"write"===e?(t.hidden=!1,o.hidden=!0):(t.hidden=!0,o.hidden=!1),W()}(t.dataset.mode)}),(e=document.getElementById("btn-get-location"))&&e.addEventListener("click",X),b.addEventListener("click",$),w.addEventListener("click",F),q.querySelector(".bottom-sheet__handle").addEventListener("click",F),T.addEventListener("click",Y),document.getElementById("customer-name").addEventListener("input",W),function(){var e=document.getElementById("qr-modal-code"),t=document.getElementById("qr-download-btn"),o=document.getElementById("qr-modal-overlay"),a=document.getElementById("qr-modal-download"),n=document.getElementById("qr-modal-close");if(!e||"undefined"==typeof QRCode)return;e.innerHTML="",new QRCode(e,{text:"https://asador.ganaderiacatorce.com",width:200,height:200,colorDark:"#D4231A",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}),t.addEventListener("click",function(){o.classList.add("is-visible")}),n.addEventListener("click",function(){o.classList.remove("is-visible")}),o.addEventListener("click",function(e){e.target===o&&o.classList.remove("is-visible")}),a.addEventListener("click",function(){var t=e.querySelector("canvas");if(t){var o=document.createElement("a");o.download="asador-callejero-catorce-qr.png",o.href=t.toDataURL("image/png"),o.click()}})}(),function(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){return document.querySelectorAll(".hero__logo, .hero__subtitle, .hero__title, .hero__tagline, .hero__hours, .hero__bottom-info, .qr-download-btn").forEach(function(e){e.style.opacity="1"}),document.querySelectorAll(".menu__world-title, .menu__world-quote, .menu__category-desc, .menu__item, .salsas__subtitle").forEach(function(e){e.style.opacity="1"}),document.querySelectorAll(".menu__world").forEach(function(e){e.classList.add("is-entered")}),G(),document.querySelectorAll(".hero__letter").forEach(function(e){e.style.opacity="1"}),function(){var e=document.getElementById("menu");if(!e)return;var t=.2*window.innerHeight;window.addEventListener("scroll",function(){var o=e.getBoundingClientRect(),a=o.top<=t&&o.bottom>0;g.classList.toggle("is-visible",a)},{passive:!0})}(),C(),O(0),void window.addEventListener("resize",function(){P(c)})}gsap.registerPlugin(ScrollTrigger),G();var e=gsap.timeline({delay:.3});e.fromTo(".hero__logo",{opacity:0,scale:.8,filter:"blur(10px)"},{opacity:1,scale:1,filter:"blur(0px)",duration:.8,ease:"back.out(1.7)"}),e.fromTo(".hero__subtitle",{opacity:0,letterSpacing:"0.4em"},{opacity:1,letterSpacing:"0.15em",duration:.6,ease:"power3.out"},"-=0.3"),e.set(".hero__title",{opacity:1}),e.fromTo(".hero__letter",{opacity:0,y:40,rotateX:-90},{opacity:1,y:0,rotateX:0,duration:.5,stagger:.06,ease:"back.out(2.5)"},"-=0.2"),e.fromTo(".hero__tagline",{opacity:0,y:20},{opacity:1,y:0,duration:.5,ease:"power3.out"},"-=0.2"),e.fromTo(".hero__tagline--top",{opacity:0,y:-10},{opacity:1,y:0,duration:.5,ease:"power3.out"},"-=0.3"),e.fromTo(".hero__bottom-info",{opacity:0,y:15},{opacity:1,y:0,duration:.6,ease:"power3.out"},"-=0.2"),e.fromTo(".qr-download-btn",{opacity:0},{opacity:1,duration:.4,ease:"power2.out"},"-=0.4");var t=document.querySelector(".hero__bottom-info"),o=document.querySelector(".hero");t&&o&&gsap.to(t,{opacity:0,ease:"none",scrollTrigger:{trigger:o,start:"10% top",end:"30% top",scrub:!0}});var a=document.getElementById("menu");a&&ScrollTrigger.create({trigger:a,start:"top 80%",end:"bottom top",onEnter:function(){g.classList.add("is-visible")},onLeave:function(){g.classList.remove("is-visible")},onEnterBack:function(){g.classList.add("is-visible")},onLeaveBack:function(){g.classList.remove("is-visible")}});[".order-type",".footer"].forEach(function(e){var t=document.querySelector(e);t&&gsap.fromTo(t,{opacity:0,y:40},{opacity:1,y:0,duration:.8,ease:"power3.out",scrollTrigger:{trigger:t,start:"top 85%",once:!0}})}),requestAnimationFrame(function(){ScrollTrigger.refresh(),C(),O(0)}),window.addEventListener("resize",function(){P(c)})}()})})}();