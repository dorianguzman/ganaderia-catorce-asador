!function(){"use strict";var e={tacos:{character:"assets/generated/zone-tacos.webp",characterVideo:"assets/generated/zone-tacos.mp4",accent:"#D4231A",quote:"Los tacos son mi vida, guero!"},quesadillas:{character:"assets/generated/zone-quesadillas.webp",characterVideo:"assets/generated/zone-quesadillas.mp4",accent:"#F9A825",quote:"Con quesito, todo sabe mejor."},charolas:{character:"assets/generated/zone-charolas.webp",characterVideo:"assets/generated/zone-charolas.mp4",accent:"#BF360C",quote:"Pa' los que van en serio."},especialidades:{character:"assets/generated/zone-especialidades.webp",characterVideo:"assets/generated/zone-especialidades.mp4",accent:"#8D6E63",quote:"Lo mejor de la casa, compadre."},bebidas:{character:"assets/generated/zone-bebidas.webp",characterVideo:"assets/generated/zone-bebidas.mp4",accent:"#558B2F",quote:"Pa' refrescar el alma!"},postres:{character:"assets/generated/zone-postres.webp",characterVideo:"assets/generated/zone-postres.mp4",accent:"#E91E63",quote:"El broche de oro, mi amor."},salsas:{character:"assets/generated/salsas-scene.webp",characterVideo:"assets/generated/salsas-scene.mp4",accent:"#F44336",quote:"Incluidas con tu pedido"}},t={tacos:{emoji:"üåÆ",short:"Tacos"},quesadillas:{emoji:"üßÄ",short:"Quesas"},charolas:{emoji:"ü•©",short:"Charolas"},especialidades:{emoji:"‚≠ê",short:"Espec."},bebidas:{emoji:"ü•§",short:"Bebidas"},postres:{emoji:"üç∞",short:"Postres"},salsas:{emoji:"üå∂Ô∏è",short:"Salsas"}},a=["taco-newyork","quesa-newyork","charola-combinada","charola-diezmillo","chavindeca","papa-grill"],o=null,n={},r=null,i="write",s=null,c=0,d=0,l=0,u=0,m=0,p=!1,y=!1,g={},h=document.getElementById("menu-nav"),f=document.getElementById("menu-dots"),v=document.getElementById("menu-worlds"),_=document.getElementById("menu-worlds-track"),b=document.getElementById("cart-fab"),w=document.getElementById("cart-badge"),E=document.getElementById("bottom-sheet"),q=document.getElementById("sheet-overlay"),L=document.getElementById("sheet-items"),I=document.getElementById("sheet-empty"),B=document.getElementById("sheet-order-type"),k=document.getElementById("sheet-address"),x=document.getElementById("sheet-total-value"),S=document.getElementById("btn-send"),T=document.getElementById("address-form");function A(e){var t=e.target.closest(".stepper__btn");if(t){var a=t.dataset.id,o=t.dataset.action;"plus"===o&&N(a),"minus"===o&&D(a)}}function C(){_.addEventListener("touchstart",j,{passive:!0}),_.addEventListener("touchmove",M,{passive:!1}),_.addEventListener("touchend",z,{passive:!0}),document.addEventListener("keydown",function(e){"ArrowRight"===e.key&&P(Math.min(c+1,d-1)),"ArrowLeft"===e.key&&P(Math.max(c-1,0))})}function j(e){if(!y){var t=e.touches[0];l=t.clientX,u=t.clientY,m=0,p=!1,_.classList.remove("is-animating")}}function M(e){if(!y){var t=e.touches[0],a=t.clientX-l,o=t.clientY-u;if(!(!p&&Math.abs(a)<10&&Math.abs(o)<10)){if(!p){if(Math.abs(o)>Math.abs(a))return;p=!0}if(p){e.preventDefault(),m=a,(0===c&&a>0||c===d-1&&a<0)&&(m=.3*a);var n=100*-c,r=m/_.offsetWidth*100;_.style.transform="translateX("+(n+r)+"%)"}}}}function z(){p&&(p=!1,Math.abs(m)>50?m<0&&c<d-1?P(c+1):m>0&&c>0?P(c-1):H():H())}function H(){_.classList.add("is-animating"),_.style.transform="translateX("+100*-c+"%)"}function P(t){if(!(t<0||t>=d)){c=t,_.classList.add("is-animating"),_.style.transform="translateX("+100*-t+"%)",function(t){var a=h.querySelectorAll(".menu__tab"),o=f.querySelectorAll(".menu__dot"),n=_.querySelectorAll(".menu__world"),r=n[t],i=r?r.dataset.zone:"",s=e[i]||{};a.forEach(function(e,a){e.classList.toggle("is-active",a===t)}),o.forEach(function(e,a){e.classList.toggle("is-active",a===t),a===t&&s.accent?e.style.background=s.accent:e.style.background=""}),s.accent&&h.style.setProperty("--tab-accent",s.accent)}(t),O(t);var a=_.querySelectorAll(".menu__world")[t];a&&!g[t]&&(g[t]=!0,function(e){var t=window.matchMedia("(prefers-reduced-motion: reduce)").matches,a=e.querySelector(".menu__world-bg"),o=e.querySelector(".menu__world-title"),n=e.querySelector(".menu__world-quote"),r=e.querySelector(".menu__category-desc"),i=e.querySelector(".salsas__subtitle"),s=e.querySelectorAll(".menu__item"),c=e.querySelector(".salsas__image-wrap");if(t)return a&&(a.style.opacity="0.06"),o&&(o.style.opacity="1"),n&&(n.style.opacity="1"),r&&(r.style.opacity="1"),i&&(i.style.opacity="1"),s.forEach(function(e){e.style.opacity="1"}),c&&(c.style.opacity="1"),void e.classList.add("is-entered");if("undefined"==typeof gsap)return o&&(o.style.opacity="1"),n&&(n.style.opacity="1"),r&&(r.style.opacity="1"),i&&(i.style.opacity="1"),s.forEach(function(e){e.style.opacity="1"}),void e.classList.add("is-entered");var d=gsap.timeline({onComplete:function(){e.classList.add("is-entered")}});a&&d.fromTo(a,{opacity:0,scale:1.2},{opacity:.06,scale:1,duration:.6,ease:"power3.out"});o&&d.fromTo(o,{opacity:0,y:15},{opacity:1,y:0,duration:.5,ease:"power3.out"},a?"-=0.3":"0");n&&d.fromTo(n,{opacity:0,y:10},{opacity:1,y:0,duration:.4,ease:"power3.out"},"-=0.2");r&&d.fromTo(r,{opacity:0,y:10},{opacity:1,y:0,duration:.4,ease:"power3.out"},"-=0.2");i&&d.fromTo(i,{opacity:0,y:10},{opacity:1,y:0,duration:.4,ease:"power3.out"},"-=0.2");s.length>0&&d.fromTo(s,{opacity:0,y:25,scale:.95},{opacity:1,y:0,scale:1,duration:.4,stagger:.06,ease:"power3.out"},"-=0.2");c&&d.fromTo(c,{opacity:0,y:20},{opacity:1,y:0,duration:.5,ease:"power3.out"},"-=0.2")}(a)),function(e){var t=_.querySelectorAll(".menu__world");t.forEach(function(t,a){t.querySelectorAll("video").forEach(function(t){a===e?(t.dataset.src&&!t.src&&(t.src=t.dataset.src,t.removeAttribute("data-src")),t.play().catch(function(){})):t.paused||t.pause()})})}(t),y=!0,setTimeout(function(){y=!1},450)}}function O(e){var t=_.querySelectorAll(".menu__world")[e];if(t){var a=t.scrollHeight,o=window.matchMedia("(prefers-reduced-motion: reduce)").matches;"undefined"==typeof gsap||o?v.style.height=a+"px":gsap.to(v,{height:a,duration:.35,ease:"power2.out"})}}function N(e){if(!n[e]){var t=function(e){for(var t=0;t<o.categories.length;t++)for(var a=o.categories[t],n=0;n<a.items.length;n++)if(a.items[n].id===e)return{item:a.items[n],categoryName:a.name,categoryId:a.id};return null}(e);if(!t)return;n[e]={item:t.item,qty:0,categoryName:t.categoryName,categoryId:t.categoryId}}n[e].qty++,V(e);var a=_.querySelector('[data-item-id="'+e+'"]');a&&(a.classList.add("has-items"),a.classList.remove("is-pulse"),a.offsetWidth,a.classList.add("is-pulse")),O(c)}function D(e){if(n[e]&&!(n[e].qty<=0)){n[e].qty--;var t=_.querySelector('[data-item-id="'+e+'"]');0===n[e].qty&&(delete n[e],t&&t.classList.remove("has-items")),V(e),O(c)}}function V(e){var t=document.getElementById("count-"+e);t&&(t.textContent=n[e]?n[e].qty:0);for(var a=0,o=Object.keys(n),r=0;r<o.length;r++)a+=n[o[r]].qty;w.textContent=a,b.hidden=0===a,a>0&&(b.classList.remove("is-bounce"),b.offsetWidth,b.classList.add("is-bounce")),W()}function Q(){for(var e=0,t=Object.keys(n),a=0;a<t.length;a++){var o=n[t[a]];e+=R(o.item,o.qty)}return e}function R(e,t){if(e.promo&&t>=e.promo.qty){var a=Math.floor(t/e.promo.qty),o=t%e.promo.qty;return a*e.promo.price+o*e.price}return t*e.price}function X(){var e=document.getElementById("btn-get-location"),t=document.getElementById("location-status"),a=document.getElementById("location-error"),o=document.getElementById("location-link");if(a.hidden=!0,e.disabled=!0,e.textContent="Obteniendo...",!navigator.geolocation)return e.disabled=!1,e.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg> Obtener ubicacion',a.textContent="Tu navegador no soporta geolocalizacion.",void(a.hidden=!1);navigator.geolocation.getCurrentPosition(function(a){var n="https://maps.google.com/?q="+(s={lat:a.coords.latitude,lng:a.coords.longitude}).lat+","+s.lng;o.href=n,t.hidden=!1,e.disabled=!1,e.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg> Actualizar ubicacion',W()},function(t){e.disabled=!1,e.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg> Obtener ubicacion';var o="No se pudo obtener tu ubicacion. ";1===t.code?o+="Permite el acceso a tu ubicacion en tu navegador.":2===t.code?o+="Ubicacion no disponible. Intenta de nuevo.":o+="Intenta de nuevo.",a.textContent=o,a.hidden=!1},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}function $(){U(),q.hidden=!1,requestAnimationFrame(function(){q.classList.add("is-visible"),E.classList.add("is-open"),E.setAttribute("aria-hidden","false")}),document.body.style.overflow="hidden"}function F(){q.classList.remove("is-visible"),E.classList.remove("is-open"),E.setAttribute("aria-hidden","true"),document.body.style.overflow="",setTimeout(function(){q.hidden=!0},300)}function U(){for(var e=[],t=Object.keys(n),a=0;a<t.length;a++)e.push(n[t[a]]);var o=e.length>0;if(I.hidden=o,L.hidden=!o,"dine-in"===r)B.textContent="Para Comer Aqui",k.textContent="";else if("takeaway"===r)if(B.textContent="Para Llevar","location"===i&&s){var c="https://maps.google.com/?q="+s.lat+","+s.lng,d=document.getElementById("location-ref").value;k.innerHTML='<a href="'+c+'" target="_blank" rel="noopener" style="color:var(--orange);text-decoration:underline;">Ver ubicacion en mapa</a>',d&&(k.innerHTML+=" &middot; "+d)}else{var l=[document.getElementById("address-street").value,document.getElementById("address-colonia").value,document.getElementById("address-ref").value].filter(Boolean);k.textContent=l.length?l.join(", "):""}else B.textContent="Selecciona tipo de pedido",k.textContent="";o?(L.innerHTML=e.map(function(e){var t=R(e.item,e.qty),a=e.categoryName;e.item.promo&&e.qty>=e.item.promo.qty&&(a+=" ("+Math.floor(e.qty/e.item.promo.qty)+"x promo)");return'<div class="sheet-item"><div class="sheet-item__info"><div class="sheet-item__name">'+e.item.name+'</div><div class="sheet-item__detail">'+a+'</div></div><div class="sheet-item__stepper"><button class="stepper__btn stepper__btn--minus" data-sheet-action="minus" data-id="'+e.item.id+'" aria-label="Quitar uno">‚àí</button><span class="stepper__count">'+e.qty+'</span><button class="stepper__btn stepper__btn--plus" data-sheet-action="plus" data-id="'+e.item.id+'" aria-label="Agregar uno">+</button></div><span class="sheet-item__subtotal">$'+t+"</span></div>"}).join(""),L.querySelectorAll(".stepper__btn").forEach(function(e){e.addEventListener("click",function(){var t=e.dataset.id,a=e.dataset.sheetAction;"plus"===a&&N(t),"minus"===a&&D(t),U()})}),x.textContent="$"+Q()):x.textContent="$0"}function W(){var e=Object.keys(n).length>0,t=document.getElementById("customer-name").value.trim().length>0,a=null!==r;S.disabled=!(e&&t&&a)}function Y(){var e=document.getElementById("customer-name").value.trim();if(e){var t="Hola! Quiero hacer un pedido:\n\n";if("dine-in"===r)t+="*Para Comer Aqui*\n";else if(t+="*Para Llevar*\n","location"===i&&s){t+="Ubicacion: https://maps.google.com/?q="+s.lat+","+s.lng+"\n";var a=document.getElementById("location-ref").value.trim();a&&(t+="Referencia: "+a+"\n")}else{var o=[document.getElementById("address-street").value.trim(),document.getElementById("address-colonia").value.trim(),document.getElementById("address-ref").value.trim()].filter(Boolean);o.length&&(t+="Direccion: "+o.join(", ")+"\n")}t+="\n";for(var c=Object.keys(n),d=0;d<c.length;d++){var l=n[c[d]],u=R(l.item,l.qty),m="- "+l.qty+"x "+l.categoryName+" "+l.item.name+" ($"+u+")";if(l.item.promo&&l.qty>=l.item.promo.qty)m+=" ["+Math.floor(l.qty/l.item.promo.qty)+"x promo "+l.item.promo.label+"]";t+=m+"\n"}t+="\n*Total: $"+Q()+"*\n",t+="\nNombre: "+e;var p="https://wa.me/5214461060320?text="+encodeURIComponent(t);window.open(p,"_blank","noopener");var y=document.getElementById("sheet-celebration");y&&(y.hidden=!1,setTimeout(function(){y.hidden=!0},4e3))}}function G(){var e=document.getElementById("hero-title");if(e&&"true"!==e.dataset.split){var t=e.textContent.trim();e.innerHTML="";for(var a=0;a<t.length;a++){var o=document.createElement("span");o.className="hero__letter",o.textContent=t[a],e.appendChild(o)}e.dataset.split="true"}}document.addEventListener("DOMContentLoaded",function(){fetch("data/menu.json").then(function(e){return e.json()}).then(function(r){var i,s,c,l;(i=(o=r).categories.map(function(e){return e.id})).push("salsas"),d=i.length,h.innerHTML=i.map(function(e){var a=t[e]||{emoji:"",short:e};return'<button class="menu__tab" data-world-index="'+i.indexOf(e)+'" data-category="'+e+'">'+a.emoji+" "+a.short+"</button>"}).join(""),f.innerHTML=i.map(function(e,a){return'<button class="menu__dot" data-world-index="'+a+'" aria-label="'+(t[e]||{}).short+'"></button>'}).join(""),h.addEventListener("click",function(e){var t=e.target.closest(".menu__tab");t&&P(parseInt(t.dataset.worldIndex,10))}),f.addEventListener("click",function(e){var t=e.target.closest(".menu__dot");t&&P(parseInt(t.dataset.worldIndex,10))}),l="",o.categories.forEach(function(t){l+=function(t){var o=e[t.id]||{},r="";o.character&&(r='<div class="menu__world-bg"><img src="'+o.character+'" alt="" loading="lazy"></div>');var i='<div class="menu__world-header"><h3 class="menu__world-title">'+(t.icon||"")+" "+t.name+"</h3>";o.quote&&(i+='<p class="menu__world-quote">"'+o.quote+'"</p>'),t.description&&(i+='<p class="menu__category-desc">'+t.description+"</p>"),i+="</div>";var s="";"postres"===t.id&&(s='<img src="assets/postres.png" alt="Postres" class="menu__postres-img" loading="lazy" style="position:relative;z-index:1;">');var c=t.items.map(function(e){return function(e){var t=n[e.id]?n[e.id].qty:0,o="";e.promo&&(o='<span class="menu__item-promo">'+e.promo.label+"</span>");var r="";e.variant&&(r='<span class="menu__item-variant">'+e.variant.name+": $"+e.variant.price+"</span>");var i=-1!==a.indexOf(e.id);return'<div class="menu__item'+(i?" menu__item--premium":"")+(t>0?" has-items":"")+'" data-item-id="'+e.id+'"><span class="menu__item-name">'+e.name+'</span><span class="menu__item-price">$'+e.price+"</span>"+o+r+'<div class="stepper"><button class="stepper__btn stepper__btn--minus" data-action="minus" data-id="'+e.id+'" aria-label="Quitar uno">‚àí</button><span class="stepper__count" id="count-'+e.id+'">'+t+'</span><button class="stepper__btn stepper__btn--plus" data-action="plus" data-id="'+e.id+'" aria-label="Agregar uno">+</button></div></div>'}(e)}).join(""),d="";return t.note&&(d='<p class="menu__category-note">* '+t.note+"</p>"),'<div class="menu__world" data-zone="'+t.id+'">'+r+i+s+'<div class="menu__items">'+c+"</div>"+d+"</div>"}(t)}),l+=(c="",(s=e.salsas).character&&(c='<div class="menu__world-bg"><img src="'+s.character+'" alt="" loading="lazy"></div>'),'<div class="menu__world menu__world--salsas" data-zone="salsas">'+c+'<div class="menu__world-header"><h3 class="menu__world-title">üå∂Ô∏è Nuestras Salsas</h3><p class="menu__world-quote">"'+s.quote+'"</p><p class="menu__world--salsas salsas__subtitle">Incluidas con tu pedido</p></div><div class="salsas__image-wrap"><img src="assets/salsas.png" alt="Salsas del Asador Callejero Catorce" class="salsas__img" loading="lazy"></div></div>'),_.innerHTML=l,_.addEventListener("click",A)}).catch(function(e){console.error("Error loading menu:",e),_.innerHTML='<p style="text-align:center;padding:2rem;color:var(--white-dim);">No se pudo cargar el menu.</p>'}).then(function(){var e,t;document.querySelectorAll(".order-card").forEach(function(e){e.addEventListener("click",function(){!function(e){r=e;var t=document.getElementById("order-type-cards");document.querySelectorAll(".order-card").forEach(function(t){t.setAttribute("aria-pressed",t.dataset.type===e)}),t.classList.add("has-selection"),T.hidden="takeaway"!==e}(e.dataset.type)})}),(t=document.getElementById("address-toggle"))&&t.addEventListener("click",function(e){var t=e.target.closest(".address-toggle__btn");t&&function(e){i=e;var t=document.getElementById("address-fields"),a=document.getElementById("location-share");document.querySelectorAll(".address-toggle__btn").forEach(function(t){t.classList.toggle("is-active",t.dataset.mode===e)}),"write"===e?(t.hidden=!1,a.hidden=!0):(t.hidden=!0,a.hidden=!1),W()}(t.dataset.mode)}),(e=document.getElementById("btn-get-location"))&&e.addEventListener("click",X),b.addEventListener("click",$),q.addEventListener("click",F),E.querySelector(".bottom-sheet__handle").addEventListener("click",F),S.addEventListener("click",Y),document.getElementById("customer-name").addEventListener("input",W),function(){var e=document.getElementById("qr-modal-code"),t=document.getElementById("qr-download-btn"),a=document.getElementById("qr-modal-overlay"),o=document.getElementById("qr-modal-download"),n=document.getElementById("qr-modal-close");if(!e||"undefined"==typeof QRCode)return;e.innerHTML="",new QRCode(e,{text:"https://asador.ganaderiacatorce.com",width:200,height:200,colorDark:"#D4231A",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}),t.addEventListener("click",function(){a.classList.add("is-visible")}),n.addEventListener("click",function(){a.classList.remove("is-visible")}),a.addEventListener("click",function(e){e.target===a&&a.classList.remove("is-visible")}),o.addEventListener("click",function(){var t=e.querySelector("canvas");if(t){var a=document.createElement("a");a.download="asador-callejero-catorce-qr.png",a.href=t.toDataURL("image/png"),a.click()}})}(),function(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){return document.querySelectorAll(".hero__logo, .hero__subtitle, .hero__title, .hero__tagline, .hero__hours, .hero__bottom-info, .qr-download-btn").forEach(function(e){e.style.opacity="1"}),document.querySelectorAll(".menu__world-title, .menu__world-quote, .menu__category-desc, .menu__item, .salsas__subtitle").forEach(function(e){e.style.opacity="1"}),document.querySelectorAll(".menu__world").forEach(function(e){e.classList.add("is-entered")}),G(),document.querySelectorAll(".hero__letter").forEach(function(e){e.style.opacity="1"}),C(),P(0),void window.addEventListener("resize",function(){O(c)})}gsap.registerPlugin(ScrollTrigger),G();var e=gsap.timeline({delay:.3});e.fromTo(".hero__logo",{opacity:0,scale:.8,filter:"blur(10px)"},{opacity:1,scale:1,filter:"blur(0px)",duration:.8,ease:"back.out(1.7)"}),e.fromTo(".hero__subtitle",{opacity:0,letterSpacing:"0.4em"},{opacity:1,letterSpacing:"0.15em",duration:.6,ease:"power3.out"},"-=0.3"),e.set(".hero__title",{opacity:1}),e.fromTo(".hero__letter",{opacity:0,y:40,rotateX:-90},{opacity:1,y:0,rotateX:0,duration:.5,stagger:.06,ease:"back.out(2.5)"},"-=0.2"),e.fromTo(".hero__tagline",{opacity:0,y:20},{opacity:1,y:0,duration:.5,ease:"power3.out"},"-=0.2"),e.fromTo(".hero__tagline--top",{opacity:0,y:-10},{opacity:1,y:0,duration:.5,ease:"power3.out"},"-=0.3"),e.fromTo(".hero__bottom-info",{opacity:0,y:15},{opacity:1,y:0,duration:.6,ease:"power3.out"},"-=0.2"),e.fromTo(".qr-download-btn",{opacity:0},{opacity:1,duration:.4,ease:"power2.out"},"-=0.4");var t=document.querySelector(".hero__bottom-info"),a=document.querySelector(".hero");t&&a&&gsap.to(t,{opacity:0,ease:"none",scrollTrigger:{trigger:a,start:"10% top",end:"30% top",scrub:!0}});[".order-type",".footer"].forEach(function(e){var t=document.querySelector(e);t&&gsap.fromTo(t,{opacity:0,y:40},{opacity:1,y:0,duration:.8,ease:"power3.out",scrollTrigger:{trigger:t,start:"top 85%",once:!0}})}),requestAnimationFrame(function(){ScrollTrigger.refresh(),C(),P(0)}),window.addEventListener("resize",function(){O(c)})}()})})}();